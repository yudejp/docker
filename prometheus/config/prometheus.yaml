global:
  scrape_interval: 15s
  evaluation_interval: 15s
  scrape_timeout: 10s
  external_labels:
    monitor: 'yudejp-monitor'

# rule_files:
#   - /etc/prometheus/alert.rules

# alerting:
#   alertmanagers:
#     - scheme: http
#       static_configs:
#         - targets:
#           - alertmanager:9093

scrape_configs:
  - job_name: prometheus
    metrics_path: /metrics
    static_configs:
      - targets:
        - prometheus:9090
  - file_sd_configs:
    - files:
      - /etc/prometheus/node.yaml
    job_name: node
  - job_name: 'snmp.rtx1200'
    static_configs:
      - targets:
          - 192.168.100.1  # RTX1200
        labels:
          name: RTX1200
          vendor: yamaha
    params:
      module:
        - rtx1200
    metrics_path: /snmp
    relabel_configs:
      - source_labels: [__address__]
        target_label: __param_target
      - source_labels: [__param_target]
        target_label: instance
      - source_labels: [type]
        target_label: __param_module
      - target_label: __address__
        replacement: snmp-exporter:9116
  - job_name: switchbot
    scrape_interval: 5m
    metrics_path: /metrics
    static_configs:
      - targets:
          - D96586B2340E # meter 01
    relabel_configs:
      - source_labels: [__address__]
        target_label: __param_target
      - source_labels: [__param_target]
        target_label: instance
      - target_label: __address__
        replacement: switchbot-exporter:8080